&#8195;在上一篇《Prometheus+Node_exporter+Grafana+Alertmanager监控部署》里，已配置好了promethues的一套环境，但是这里有个问题，就是在prometheus.yml里配置需要监听的服务时，是按服务名写死的，如果后面增加了节点或者组件信息，就得手动修改此配置，并重启promethues；那么能否动态的监听微服务呢？我们知道，在分布式系统架构里，有个组件负责注册和发现所有微服务，那就是注册中心。常用的注册中心组件有Spring Cloud Netflix的Eureka，consul，dubbo等，如果promethues能监听服务注册中心的微服务，就能实现动态监听服务的功能了。这里以consul为例来整合promethues。

# Prometheus监控目标为什么要自动发现

# Prometheus支持的多种服务发现机制
```
Prometheus数据源的配置主要分为静态配置和动态发现, 常用的为以下几类:

```
